(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{ASnC:function(e,t,i){"use strict";i.r(t),i.d(t,"CoPageModule",function(){return h});var n=i("ofXK"),o=i("3Pt+"),r=i("TEn/"),s=i("tyNb"),a=i("mrSG"),l=i("fXoL"),c=i("sSZD"),d=i("UbJi"),b=i("lGQG");const u=[{path:"",component:(()=>{class e{constructor(e,t,i,n,o,r,s,a){this.afDB=e,this.afAuth=t,this.fb=i,this.auth=n,this.alertCtrl=o,this.toastCtrl=r,this.loadingCtrl=s,this.router=a,this.email="",this.userId="",this.method="",this.afAuth.authState.subscribe(e=>{e?(console.log("connect\xe9"),this.userId=e.uid,this.email=e.email,this.method=e.providerData[0].providerId):console.log("non connect\xe9")})}ngOnInit(){this.loginForm=this.fb.group({email:["",[o.l.required,o.l.email]],password:["",[o.l.required,o.l.minLength(6)]]})}login(){return Object(a.a)(this,void 0,void 0,function*(){let e=yield this.loadingCtrl.create({message:"Chargement..."});yield e.present(),this.auth.signIn(this.loginForm.value).subscribe(t=>{e.dismiss();let i=t.role;"USER"==i?this.router.navigateByUrl("/profil"):"ADMIN"==i&&this.router.navigateByUrl("/admin")},t=>Object(a.a)(this,void 0,void 0,function*(){e.dismiss(),(yield this.alertCtrl.create({header:"Error",message:t.message,buttons:["OK"]})).present()}))})}openReset(){return Object(a.a)(this,void 0,void 0,function*(){(yield this.alertCtrl.create({header:"R\xe9initialisation de mot de passe",inputs:[{name:"email",placeholder:"Email"}],buttons:[{text:"Annuler",role:"cancel"},{text:"R\xe9initialiser",handler:e=>{this.resetPw(e.email)}}]})).present()})}resetPw(e){this.auth.resetPw(e).then(e=>Object(a.a)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({duration:3e3,message:"Un email vous a \xe9t\xe9 envoy\xe9 ! Veuillez cliquer sur le lien pr\xe9sent dans le mail pour r\xe9initialiser votre mot de passe."})).present()}),e=>Object(a.a)(this,void 0,void 0,function*(){(yield this.alertCtrl.create({header:"Error",message:e.message,buttons:["OK"]})).present()}))}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(c.a),l.Lb(d.a),l.Lb(o.a),l.Lb(b.a),l.Lb(r.a),l.Lb(r.Q),l.Lb(r.K),l.Lb(s.g))},e.\u0275cmp=l.Fb({type:e,selectors:[["app-co"]],decls:24,vars:2,consts:[[1,"header"],[2,"color","white"],[2,"color","yellow"],["text-center","","src","../../assets/icon/77191645.png","routerLink","/home"],[1,"padding"],[3,"formGroup","ngSubmit"],["color","light"],["color","light","type","email","formControlName","email","placeholder","Adresse mail","type","email"],["color","light","type","password","formControlName","password","placeholder","Mot de passe","type","password"],["lines","none"],["color","light","fill","clear","slot","end",3,"click"],["color","success","shape","round","type","submit","expand","block",3,"disabled","click"],["shape","round","routerLink","/register","color","tertiary","expand","block"]],template:function(e,t){1&e&&(l.Ob(0,"ion-content"),l.Ob(1,"div",0),l.Ob(2,"h1",1),l.lc(3,"(Re)Sources relationnelles"),l.Nb(),l.Ob(4,"h2",2),l.lc(5,"Cr\xe9er, partager, enrichir vos relations"),l.Nb(),l.Mb(6,"ion-img",3),l.Nb(),l.Ob(7,"div",4),l.Ob(8,"form",5),l.Wb("ngSubmit",function(){return t.login()}),l.Ob(9,"ion-item"),l.Ob(10,"ion-label",6),l.lc(11,"Email"),l.Nb(),l.Mb(12,"ion-input",7),l.Nb(),l.Ob(13,"ion-item"),l.Ob(14,"ion-label",6),l.lc(15,"Mot de passe"),l.Nb(),l.Mb(16,"ion-input",8),l.Nb(),l.Ob(17,"ion-item",9),l.Ob(18,"ion-button",10),l.Wb("click",function(){return t.openReset()}),l.lc(19,"Mot de passe oubli\xe9"),l.Nb(),l.Nb(),l.Ob(20,"ion-button",11),l.Wb("click",function(){return t.login()}),l.lc(21,"Connexion"),l.Nb(),l.Ob(22,"ion-button",12),l.lc(23,"Inscription"),l.Nb(),l.Nb(),l.Nb(),l.Nb()),2&e&&(l.Bb(8),l.ec("formGroup",t.loginForm),l.Bb(12),l.ec("disabled",!t.loginForm.valid))},directives:[r.k,r.p,r.N,s.h,o.m,o.h,o.c,r.r,r.t,r.q,r.P,o.g,o.b,r.e],styles:["@media screen and (max-width:640px){ion-content[_ngcontent-%COMP%]{--background:url(fdCo.99a7cbb89d66302157ea.png) 0 0/100% 100% no-repeat}}@media screen and (min-width:640px){ion-content[_ngcontent-%COMP%]{--background:url(desktop.20049af74201b37937c5.png) 0 0/100% 100% no-repeat;object-fit:cover}}.header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;text-align:center;padding-top:30px}ion-img[_ngcontent-%COMP%]{height:170px;width:170px}ion-item[_ngcontent-%COMP%]{--ion-background-color:transparent!important}.padding[_ngcontent-%COMP%]{padding:5%}"]}),e})()}];let p=(()=>{class e{}return e.\u0275mod=l.Jb({type:e}),e.\u0275inj=l.Ib({factory:function(t){return new(t||e)},imports:[[s.i.forChild(u)],s.i]}),e})(),h=(()=>{class e{}return e.\u0275mod=l.Jb({type:e}),e.\u0275inj=l.Ib({factory:function(t){return new(t||e)},imports:[[n.c,o.d,o.j,r.I,p]]}),e})()}}]);